<!doctype html>
<html lang="th" class="h-full">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Coder Showcase 2026 - Voting System</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;500;600&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Prompt', sans-serif; background: #f4f7fb; color: #1e293b; }
    .candidate-card { transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1); border: 2px solid white; cursor: pointer; background: white; }
    .candidate-card:hover { transform: translateY(-3px); box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1); }
    .candidate-card.selected { border-color: #3b82f6; background: #eff6ff; box-shadow: 0 0 0 2px #3b82f6; }
    .main-section { background: rgba(255, 255, 255, 0.6); border-radius: 2rem; padding: 1.5rem; border: 1px solid #e2e8f0; margin-bottom: 2rem; }
    .sticky-bar { position: fixed; bottom: 0; left: 0; right: 0; background: white; border-top: 1px solid #e2e8f0; z-index: 50; padding: 1rem; }
  </style>
</head>
<body class="pb-32">

  <div id="app" class="max-w-5xl mx-auto px-4 pt-10">
    <div id="screen-voting-container">
        <header id="main-header" class="text-center mb-12">
          <div class="inline-block px-4 py-1 mb-4 rounded-full bg-blue-100 text-blue-600 text-xs font-bold tracking-widest uppercase">
            Project Showcase 15 Feb 2026
          </div>
          <h1 class="text-4xl font-bold text-slate-800 mb-4">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ú‡∏•‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏ä‡∏∑‡πà‡∏ô‡∏ä‡∏≠‡∏ö</h1>
          <p class="text-slate-500 text-lg">‡∏Å‡∏ï‡∏¥‡∏Å‡∏≤: ‡πÇ‡∏õ‡∏£‡∏î‡∏Å‡∏£‡∏≠‡∏Å‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡πÅ‡∏•‡∏∞‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ô‡∏±‡∏Å‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏õ‡∏£‡∏∞‡∏ó‡∏±‡∏ö‡πÉ‡∏à **‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 2 ‡∏ó‡πà‡∏≤‡∏ô**</p>
        </header>

        <div id="screen-voting" class="space-y-8">
          <div class="max-w-md mx-auto mb-10">
            <div class="bg-white p-2 rounded-3xl shadow-sm border border-slate-200">
              <input type="email" id="input-email" oninput="validate()" 
                     class="w-full px-6 py-4 rounded-2xl focus:outline-none text-center text-lg" 
                     placeholder="‡πÉ‡∏™‡πà‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÇ‡∏´‡∏ß‡∏ï">
            </div>
          </div>

          <section class="main-section">
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4" id="grid-candidates">
                </div>
          </section>
        </div>
    </div>

    <div id="screen-loading" class="hidden text-center py-24">
        <div class="animate-spin rounded-full h-16 w-16 border-b-4 border-blue-600 mx-auto mb-4"></div>
        <p class="text-slate-600 text-xl">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÇ‡∏´‡∏ß‡∏ï...</p>
    </div>
    
    <div id="screen-success" class="hidden text-center py-24">
        <div class="text-6xl mb-6 text-green-500">‚úÖ</div>
        <h2 class="text-4xl font-bold text-green-600 mb-4">‡πÇ‡∏´‡∏ß‡∏ï‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!</h2>
        <p class="text-slate-500 text-xl">‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡∏£‡πà‡∏ß‡∏°‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏£‡∏á‡πÉ‡∏à‡πÉ‡∏´‡πâ‡πÄ‡∏î‡πá‡∏Å‡πÜ ‡∏Ñ‡∏£‡∏±‡∏ö</p>
    </div>
    
    <div id="screen-already" class="hidden text-center py-24">
        <div class="text-6xl mb-6 text-amber-500">üö´</div>
        <h2 class="text-4xl font-bold text-amber-600 mb-4">‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡πÉ‡∏ä‡πâ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß</h2>
        <p class="text-slate-500 text-xl">‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏£‡∏ß‡∏à‡∏û‡∏ö‡∏ß‡πà‡∏≤‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ô‡∏µ‡πâ‡∏´‡∏£‡∏∑‡∏≠‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏ô‡∏µ‡πâ‡πÑ‡∏î‡πâ‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏ß‡∏ï‡πÅ‡∏•‡πâ‡∏ß</p>
    </div>
  </div>

  <div class="sticky-bar shadow-2xl" id="bottom-bar">
    <div class="max-w-md mx-auto">
      <div class="text-center mb-3 text-sm font-bold text-slate-500">
        ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß: <span id="count-display" class="text-blue-600 text-lg">0</span> ‡∏ó‡πà‡∏≤‡∏ô (‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 2 ‡∏ó‡πà‡∏≤‡∏ô)
      </div>
      <button id="btn-submit" disabled onclick="submitData()" 
              class="w-full py-4 rounded-2xl font-bold text-xl transition-all shadow-lg bg-blue-600 text-white disabled:bg-slate-200 disabled:text-slate-400">
        ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏ß‡∏ï
      </button>
    </div>
  </div>

  <script>
    const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbytB9EYdDchiN5KOAeNemFtYKk---gUt9qxH7z-0lVbbedWWBv4qj6mJsIgxR56h3tPNQ/exec";

    const candidates = [
      { "id": 1, "name": "Neo (Touchphoom Anantakarn)", "project": "Dive: An Underwater Adventure" },
      { "id": 2, "name": "Meg (Mira Hsu)", "project": "TinkerCad Project" },
      { "id": 3, "name": "Kin (Pakin Hsu)", "project": "TinkerCad Project" },
      { "id": 4, "name": "Marvin (Apipoom Hanjawanich)", "project": "Survival Underwater in Ohio" },
      { "id": 5, "name": "Pete (PITCHAYUT KRUECHOTEKUL)", "project": "Ocean Guardian" },
      { "id": 6, "name": "JulJul (Saranyapong Kanchanapangka)", "project": "Exploring the deep ocean" },
      { "id": 7, "name": "Etienne (Tiberghien)", "project": "The blox water" },
      { "id": 8, "name": "Aiden (Kritchanon Sivasri)", "project": "The Secret Monster" },
      { "id": 9, "name": "Dylan", "project": "The Megalodon Hunt" },
      { "id": 10, "name": "Tyler (Tyler Saebae)", "project": "Sharky's Snack Time" },
      { "id": 11, "name": "Nine (Paratham Jameeken)", "project": "Deep Blue World" },
      { "id": 12, "name": "Nuermek (Nuermek Teeraakararat)", "project": "My Ocean Friends Party" },
      { "id": 13, "name": "Preme2 (Premephaphan Ittipunsiri)", "project": "Amazing Sea Creatures Quiz" },
      { "id": 14, "name": "Gin (Sasawat Lertsamart)", "project": "Submerged" },
      { "id": 15, "name": "Famous (Yannavut Sridawong)", "project": "‡∏ö‡πâ‡∏≤‡∏ô spongeBob" },
      { "id": 16, "name": "Tonmai (Nathakorn Somsanguan)", "project": "Dedo in the ocean" },
      { "id": 17, "name": "Matang (Tanawat Tangsupwattana)", "project": "‡∏ú‡∏π‡πâ‡∏Å‡∏•‡πâ‡∏≤‡∏Å‡∏±‡∏ö‡∏î‡∏≤‡∏ö‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏Ç‡πÇ‡∏°‡∏¢‡πÑ‡∏õ" },
      { "id": 18, "name": "Pingping (Narathorn Janvipast)", "project": "spongebob" },
      { "id": 19, "name": "Kenta (Wuttipat Tubsarn)", "project": "Ratatouille" },
      { "id": 20, "name": "Temim (Phuchanut Saengrayub)", "project": "‡∏®‡∏∂‡∏Å‡∏ú‡∏π‡πâ‡∏Å‡∏•‡πâ‡∏≤‡∏ó‡πâ‡∏≤‡∏Ñ‡∏£‡∏≤‡πÄ‡∏Ñ‡∏ô" },
      { "id": 21, "name": "Takky (Tatchakorn Sattawongsakul)", "project": "Super underwater" },
      { "id": 22, "name": "Pang pang (Komthorn Janvipast)", "project": "kraken" },
      { "id": 23, "name": "Tigger (Totchakorn Sattawongsakul)", "project": "Underwater adventure" },
      { "id": 24, "name": "L (Allen) (Allen Jarnyaharn)", "project": "Orange in the ocean" },
      { "id": 25, "name": "Parm & Prompt", "project": "Unshoot shark" },
      { "id": 26, "name": "Ren (Tarit Janjaemjaroon)", "project": "El gran maja and Bloob" },
      { "id": 27, "name": "Miranda (Miranda Chen)", "project": "Ginger the Clown fish" },
      { "id": 28, "name": "Gus (Akaradej Imarom)", "project": "Fishy fishy" },
      { "id": 29, "name": "Eton (Chavin Rattanasophon)", "project": "Find the fish" },
      { "id": 30, "name": "Winwin (Thanaphat ketthanasitthi)", "project": "Poseidon" },
      { "id": 31, "name": "Ran & Ray", "project": "Lovely and ancient ocean" },
      { "id": 32, "name": "Rak (Weeralak saelim)", "project": "The sea" },
      { "id": 33, "name": "Captain (Suttidol Songsripipat)", "project": "layer of ocean" },
      { "id": 34, "name": "Khonkwan (Benjanut Srisuk)", "project": "Gigi's adventure" },
      { "id": 35, "name": "liangliang (Warinthon Limsathiranun)", "project": "Hungry sea monsters" },
      { "id": 36, "name": "Thun (Thun Iamthongthong)", "project": "The hard part of sea turtle" }
    ];

    let selected = new Set();

    function init() {
      if (localStorage.getItem('voted_showcase_2026')) {
        showScreen('already');
        return;
      }
      render();
    }

    function render() {
      const grid = document.getElementById('grid-candidates');
      grid.innerHTML = candidates.map(c => `
        <div class="candidate-card p-6 rounded-3xl shadow-sm" id="c-${c.id}" onclick="toggleCandidate(${c.id})">
          <div class="font-bold text-slate-800 mb-1 text-base leading-tight">${c.name}</div>
          <div class="text-[10px] text-blue-500 font-medium uppercase tracking-tighter">${c.project}</div>
        </div>
      `).join('');
    }

    function toggleCandidate(id) {
      if (selected.has(id)) { 
          selected.delete(id); 
      } else {
          selected.add(id);
      }
      updateUI();
    }

    function updateUI() {
      document.querySelectorAll('.candidate-card').forEach(el => el.classList.remove('selected'));
      selected.forEach(sid => {
          const el = document.getElementById(`c-${sid}`);
          if (el) el.classList.add('selected');
      });
      validate();
    }

    function validate() {
      const email = document.getElementById('input-email').value;
      const isValidEmail = /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
      const count = selected.size;
      
      document.getElementById('count-display').innerText = count;

      // ‡∏Å‡∏ï‡∏¥‡∏Å‡∏≤: ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 2 ‡∏Ñ‡∏ô ‡πÅ‡∏•‡∏∞‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏ï‡πâ‡∏≠‡∏á‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
      const btn = document.getElementById('btn-submit');
      if (count >= 2 && isValidEmail) {
          btn.disabled = false;
      } else {
          btn.disabled = true;
      }
    }

    async function submitData() {
      const email = document.getElementById('input-email').value.trim();
      const allVotes = Array.from(selected).map(id => {
          const c = candidates.find(i => i.id === id);
          return c.name;
      });

      showScreen('loading');

      try {
        const response = await fetch(SCRIPT_URL, {
          method: "POST",
          body: JSON.stringify({ email: email, votes: allVotes })
        });

        const result = await response.json();

        if (result.result === "success") {
          localStorage.setItem('voted_showcase_2026', 'true');
          showScreen('success');
        } else if (result.message === "duplicate") {
          showScreen('already');
        } else {
          alert("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö: " + result.message);
          showScreen('voting');
        }
        
      } catch (e) {
        console.error("Submission Error:", e);
        // Fallback ‡πÉ‡∏ô‡∏Å‡∏£‡∏ì‡∏µ CORS ‡∏ö‡∏•‡πá‡∏≠‡∏Å‡πÅ‡∏ï‡πà‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏≤‡∏à‡πÄ‡∏Ç‡πâ‡∏≤ Sheet ‡πÅ‡∏•‡πâ‡∏ß
        localStorage.setItem('voted_showcase_2026', 'true');
        showScreen('success');
      }
    }

    function showScreen(id) {
      document.getElementById('screen-voting-container').classList.add('hidden');
      document.getElementById('screen-loading').classList.add('hidden');
      document.getElementById('screen-success').classList.add('hidden');
      document.getElementById('screen-already').classList.add('hidden');
      
      const target = document.getElementById('screen-' + id);
      if (target) target.classList.remove('hidden');
      
      if (id !== 'voting') {
        document.getElementById('bottom-bar').classList.add('hidden');
      }
      window.scrollTo(0,0);
    }

    init();
  </script>
</body>
</html>
